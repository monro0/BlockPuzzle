:root { --bg-gradient-start: #232526; --bg-gradient-end: #414345; --board-bg: rgba(0, 0, 0, 0.25); --empty-cell-bg: rgba(0, 0, 0, 0.2); --text-color: #f0f0f0; --gold-color: #ffd700; --cell-size: min(10vw, 45px); --ruby-main: #e52d27; --ruby-shadow: #b31217; --ruby-light: #ff6b6b; --sapphire-main: #2193b0; --sapphire-shadow: #186b81; --sapphire-light: #6dd5ed; --emerald-main: #00b09b; --emerald-shadow: #008371; --emerald-light: #96e6a1; --amethyst-main: #9d50bb; --amethyst-shadow: #6e48aa; --amethyst-light: #d6a4e4; --topaz-main: #fca55d; --topaz-shadow: #d77e40; --topaz-light: #ffc98b; }

/* <<-- ИЗМЕНЕНИЕ: Используем быстрые системные шрифты */
body { 
    background: linear-gradient(135deg, var(--bg-gradient-start), var(--bg-gradient-end)); 
    color: var(--text-color); 
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    display: flex; justify-content: center; align-items: center; 
    height: 100vh; margin: 0; overflow: hidden; touch-action: none; 
}

#game-container { display: flex; flex-direction: column; align-items: center; gap: 15px; width: 100%; max-width: 500px; padding: 15px; box-sizing: border-box; }
#header { display: flex; justify-content: space-between; align-items: center; width: 100%; gap: 10px; }
#score-wrapper { display: flex; gap: 10px; flex-grow: 1; }
.score-box { background: var(--board-bg); border-radius: 10px; padding: 8px 15px; text-align: center; flex-grow: 1; box-shadow: 0 4px 15px rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); }
.score-label { font-size: 0.7em; font-weight: 500; color: var(--gold-color); letter-spacing: 1px; display: block; margin-bottom: 3px; }
#score, #high-score { font-size: 1.5em; font-weight: 700; }
#game-board-container { background: var(--board-bg); padding: 10px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); }
#game-board { display: grid; grid-template-columns: repeat(8, var(--cell-size)); grid-template-rows: repeat(8, var(--cell-size)); gap: 3px; }
.cell { width: var(--cell-size); height: var(--cell-size); background-color: var(--empty-cell-bg); border-radius: 8px; box-shadow: inset 0 2px 4px rgba(0,0,0,0.5); box-sizing: border-box; }
#pieces-container { display: flex; justify-content: space-around; align-items: center; width: 100%; height: 120px; }
.piece-preview { cursor: pointer; transition: all 0.3s ease-out; }
.preview-block { width: 28px; height: 28px; }
.color-1, .color-2, .color-3, .color-4, .color-5 { position: relative; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.3), inset 0 2px 2px rgba(255,255,255,0.2); transform: perspective(500px) rotateX(10deg); }
.color-1::before, .color-2::before, .color-3::before, .color-4::before, .color-5::before { content: ''; position: absolute; top: 5%; left: 10%; width: 80%; height: 40%; background: radial-gradient(circle, rgba(255,255,255,0.5) 0%, rgba(255,255,255,0) 70%); border-radius: 50%; opacity: 0.8; }
.color-1 { background: linear-gradient(135deg, var(--ruby-light), var(--ruby-main)); border-bottom: 4px solid var(--ruby-shadow); }
.color-2 { background: linear-gradient(135deg, var(--sapphire-light), var(--sapphire-main)); border-bottom: 4px solid var(--sapphire-shadow); }
.color-3 { background: linear-gradient(135deg, var(--emerald-light), var(--emerald-main)); border-bottom: 4px solid var(--emerald-shadow); }
.color-4 { background: linear-gradient(135deg, var(--amethyst-light), var(--amethyst-main)); border-bottom: 4px solid var(--amethyst-shadow); }
.color-5 { background: linear-gradient(135deg, var(--topaz-light), var(--topaz-main)); border-bottom: 4px solid var(--topaz-shadow); }
.control-btn { background: var(--board-bg); border: 1px solid rgba(255, 255, 255, 0.1); color: var(--text-color); width: 50px; height: 50px; font-size: 1.8em; border-radius: 10px; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.2); transition: all 0.2s ease-in-out; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
.control-btn:active { transform: scale(0.95); box-shadow: 0 2px 10px rgba(0,0,0,0.2); }
#game-over-screen { position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); background-color: rgba(30,30,40,0.95); padding: 30px; border-radius: 10px; text-align: center; border: 1px solid var(--gold-color); box-shadow: 0 0 20px rgba(0,0,0,0.5); z-index: 100; }
#game-over-screen button { margin-top: 20px; background: var(--gold-color); color: #000; font-weight: bold; border-radius: 5px; padding: 12px 25px; border: none; font-size: 1em; cursor: pointer; }
.hidden { display: none !important; }
.ghost { background-color: rgba(255, 255, 255, 0.1) !important; box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.3); border: none; }
.ghost-invalid { background-color: rgba(231, 76, 60, 0.2) !important; box-shadow: inset 0 0 10px rgba(231, 76, 60, 0.5); border: none; }
.piece-preview.dragging { opacity: 0.7; transform: scale(1.1); }
.sand-particle { position: absolute; width: 6px; height: 6px; border-radius: 50%; pointer-events: none; z-index: 100; transition: transform 0.8s ease-out, opacity 0.8s ease-out; }
.unplaceable { filter: grayscale(80%); opacity: 0.4; cursor: not-allowed; }
